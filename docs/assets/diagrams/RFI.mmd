flowchart TD
    %% ── 1. RFI ─────────────────────────────
    subgraph RFI_key["🔑 RFI – Ricci 曲率臨界流 (ζ₃)"]
        K_avg["平均曲率 𝜅̄(t)"]:::state
        K_avg -- "判準 𝒞ᵣ𝒻ᵢ" --> FZ_zone((Critical Flat Zone))
    end

    %% ── 2. Flat-Zone → CTM 距離 ─────────────
    FZ_zone -- "ζ₃ → 𝐷ʷ²<br/>w₃ = 0.22" --> CTM_dist["CTM 管道距離 𝐷ʷ"]

    %% ── 3. CTM → ECGP ──────────────────────
    CTM_dist --> ECGP_key["🔑 ECGP – 因果滲流臨界 (ζ₄)"]

    %% ── 4. 樣式設定 ────────────────────────
    classDef state fill:#ffffff,stroke:#999999
    style RFI_key fill:#e1f1ff,stroke:#6ba9ff
    style ECGP_key fill:#e5fbe5,stroke:#4CAF50
